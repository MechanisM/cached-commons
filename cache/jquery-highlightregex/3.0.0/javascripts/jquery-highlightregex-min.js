(function(a){a.fn.highlightRegex=function(b){if(b==undefined||b.source==""){a(this).find("span.highlight").each(function(){a(this).replaceWith(a(this).text());a(this).parent().each(function(){node=a(this).get(0);if(node.normalize){node.normalize()}})})}else{a(this).each(function(){elt=a(this).get(0);elt.normalize();a.each(a.makeArray(elt.childNodes),function(c,d){if(d.nodeType==3){var g=d;while((pos=g.data.search(b))>=0){match=g.data.slice(pos).match(b)[0];if(match.length==0){break}var f=document.createElement("span");f.className="highlight";var e=g.splitText(pos);var g=e.splitText(match.length);var h=e.cloneNode(true);f.appendChild(h);g.parentNode.replaceChild(f,e)}}else{a(d).highlightRegex(b)}})})}return a(this)}})(jQuery);
