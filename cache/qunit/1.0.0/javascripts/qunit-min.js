(function(k){var d={init:function(){m(f,{stats:{all:0,bad:0},moduleStats:{all:0,bad:0},started:+new Date,updateRate:1000,blocking:false,autostart:true,autorun:false,assertions:[],filters:[],queue:[]});var t=a("qunit-tests"),s=a("qunit-banner"),r=a("qunit-testresult");if(t){t.innerHTML=""}if(s){s.className=""}if(r){r.parentNode.removeChild(r)}},module:function(r,s){f.currentModule=r;l(function(){if(f.currentModule){d.moduleDone(f.currentModule,f.moduleStats.bad,f.moduleStats.all)}f.currentModule=r;f.moduleTestEnvironment=s;f.moduleStats={all:0,bad:0};d.moduleStart(r,s)})},asyncTest:function(r,s,t){if(arguments.length===2){t=s;s=0}d.test(r,s,t,true)},test:function(s,v,x,u){var t='<span class="test-name">'+s+"</span>",w,r;if(arguments.length===2){x=v;v=null}if(v&&typeof v==="object"){r=v;v=null}if(f.currentModule){t='<span class="module-name">'+f.currentModule+"</span>: "+t}if(!o(f.currentModule+": "+s)){return}l(function(){w=m({setup:function(){},teardown:function(){}},f.moduleTestEnvironment);if(r){m(w,r)}d.testStart(s,w);d.current_testEnvironment=w;f.assertions=[];f.expected=v;var A=a("qunit-tests");if(A){var z=document.createElement("strong");z.innerHTML="Running "+t;var y=document.createElement("li");y.appendChild(z);y.id="current-test-output";A.appendChild(y)}try{if(!f.pollution){b()}w.setup.call(w)}catch(B){d.ok(false,"Setup failed on "+t+": "+B.message)}});l(function(){if(u){d.stop()}try{x.call(w)}catch(y){g("Test "+t+" died, exception and test follows",y,x);d.ok(false,"Died on test #"+(f.assertions.length+1)+": "+y.message);b();if(f.blocking){start()}}});l(function(){try{e();w.teardown.call(w)}catch(y){d.ok(false,"Teardown failed on "+t+": "+y.message)}});l(function(){try{d.reset()}catch(C){g("reset() failed, following Test "+t+", exception and reset fn follows",C,reset)}if(f.expected&&f.expected!=f.assertions.length){d.ok(false,"Expected "+f.expected+" assertions, but "+f.assertions.length+" were run")}var A=0,y=0,z=a("qunit-tests");f.stats.all+=f.assertions.length;f.moduleStats.all+=f.assertions.length;if(z){var D=document.createElement("ol");D.style.display="none";for(var B=0;B<f.assertions.length;B++){var H=f.assertions[B];var G=document.createElement("li");G.className=H.result?"pass":"fail";G.innerHTML=H.message||"(no message)";D.appendChild(G);if(H.result){A++}else{y++;f.stats.bad++;f.moduleStats.bad++}}var E=document.createElement("strong");E.innerHTML=t+" <b style='color:black;'>(<b class='fail'>"+y+"</b>, <b class='pass'>"+A+"</b>, "+f.assertions.length+")</b>";h(E,"click",function(){var I=E.nextSibling,J=I.style.display;I.style.display=J==="none"?"block":"none"});h(E,"dblclick",function(J){var I=J&&J.target?J.target:k.event.srcElement;if(I.nodeName.toLowerCase()=="span"||I.nodeName.toLowerCase()=="b"){I=I.parentNode}if(k.location&&I.nodeName.toLowerCase()==="strong"){k.location.href=k.location.href.match(/^(.+?)(\?.*)?(\#.*)?$/)[1]+"?"+encodeURIComponent(q([I]).replace(/\(.+\)$/,"").replace(/(^\s*|\s*$)/g,""))}});var G=a("current-test-output");G.id="";G.className=y?"fail":"pass";G.removeChild(G.firstChild);G.appendChild(E);G.appendChild(D);if(y){var F=a("qunit-testrunner-toolbar");if(F){F.style.display="block";a("qunit-filter-pass").disabled=null;a("qunit-filter-missing").disabled=null}}}else{for(var B=0;B<f.assertions.length;B++){if(!f.assertions[B].result){y++;f.stats.bad++;f.moduleStats.bad++}}}d.testDone(s,y,f.assertions.length);if(!k.setTimeout&&!f.queue.length){i()}});if(k.setTimeout&&!f.doneTimer){f.doneTimer=k.setTimeout(function(){if(!f.queue.length){i()}else{l(i)}},13)}},expect:function(r){f.expected=r},ok:function(r,s){s=j(s);d.log(r,s);f.assertions.push({result:!!r,message:s})},equal:function(t,s,r){n(s==t,t,s,r)},notEqual:function(t,s,r){n(s!=t,t,s,r)},deepEqual:function(t,s,r){n(d.equiv(t,s),t,s,r)},notDeepEqual:function(t,s,r){n(!d.equiv(t,s),t,s,r)},strictEqual:function(t,s,r){n(s===t,t,s,r)},notStrictEqual:function(t,s,r){n(s!==t,t,s,r)},start:function(){if(k.setTimeout){k.setTimeout(function(){if(f.timeout){clearTimeout(f.timeout)}f.blocking=false;c()},13)}else{f.blocking=false;c()}},stop:function(r){f.blocking=true;if(r&&k.setTimeout){f.timeout=k.setTimeout(function(){d.ok(false,"Test timed out");d.start()},r)}},reset:function(){if(k.jQuery){jQuery("#main").html(f.fixture);jQuery.event.global={};jQuery.ajaxSettings=m({},f.ajaxSettings)}},triggerEvent:function(t,r,s){if(document.createEvent){s=document.createEvent("MouseEvents");s.initMouseEvent(r,true,true,t.ownerDocument.defaultView,0,0,0,0,0,false,false,false,false,0,null);t.dispatchEvent(s)}else{if(t.fireEvent){t.fireEvent("on"+r)}}},is:function(r,s){return Object.prototype.toString.call(s)==="[object "+r+"]"},done:function(r,s){},log:function(r,s){},testStart:function(r,s){},testDone:function(r,s,t){},moduleStart:function(r,s){},moduleDone:function(r,s,t){}};d.equals=d.equal;d.same=d.deepEqual;var f={queue:[],blocking:true};(function(){var r=k.location||{search:"",protocol:"file:"},t=r.search.slice(1).split("&");for(var s=0;s<t.length;s++){t[s]=decodeURIComponent(t[s]);if(t[s]==="noglobals"){t.splice(s,1);s--;f.noglobals=true}else{if(t[s].search("=")>-1){t.splice(s,1);s--}}}f.filters=t;d.isLocal=!!(r.protocol==="file:")})();if(typeof exports==="undefined"||typeof require==="undefined"){m(k,d);k.QUnit=d}else{m(exports,d);exports.QUnit=d}d.config=f;if(typeof document==="undefined"||document.readyState==="complete"){f.autorun=true}h(k,"load",function(){var t=m({},f);d.init();m(f,t);f.blocking=false;var x=a("qunit-userAgent");if(x){x.innerHTML=navigator.userAgent}var w=a("qunit-testrunner-toolbar");if(w){w.style.display="none";var v=document.createElement("input");v.type="checkbox";v.id="qunit-filter-pass";v.disabled=true;h(v,"click",function(){var y=document.getElementsByTagName("li");for(var z=0;z<y.length;z++){if(y[z].className.indexOf("pass")>-1){y[z].style.display=v.checked?"none":""}}});w.appendChild(v);var s=document.createElement("label");s.setAttribute("for","qunit-filter-pass");s.innerHTML="Hide passed tests";w.appendChild(s);var u=document.createElement("input");u.type="checkbox";u.id="qunit-filter-missing";u.disabled=true;h(u,"click",function(){var y=document.getElementsByTagName("li");for(var z=0;z<y.length;z++){if(y[z].className.indexOf("fail")>-1&&y[z].innerHTML.indexOf("missing test - untested code is broken code")>-1){y[z].parentNode.parentNode.style.display=u.checked?"none":"block"}}});w.appendChild(u);s=document.createElement("label");s.setAttribute("for","qunit-filter-missing");s.innerHTML="Hide missing tests (untested code is broken code)";w.appendChild(s)}var r=a("main");if(r){f.fixture=r.innerHTML}if(k.jQuery){f.ajaxSettings=k.jQuery.ajaxSettings}if(f.autostart){d.start()}});function i(){if(f.doneTimer&&k.clearTimeout){k.clearTimeout(f.doneTimer);f.doneTimer=null}if(f.queue.length){f.doneTimer=k.setTimeout(function(){if(!f.queue.length){i()}else{l(i)}},13);return}f.autorun=true;if(f.currentModule){d.moduleDone(f.currentModule,f.moduleStats.bad,f.moduleStats.all)}var s=a("qunit-banner"),u=a("qunit-tests"),t=["Tests completed in ",+new Date-f.started," milliseconds.<br/>",'<span class="passed">',f.stats.all-f.stats.bad,'</span> tests of <span class="total">',f.stats.all,'</span> passed, <span class="failed">',f.stats.bad,"</span> failed."].join("");if(s){s.className=(f.stats.bad?"qunit-fail":"qunit-pass")}if(u){var r=a("qunit-testresult");if(!r){r=document.createElement("p");r.id="qunit-testresult";r.className="result";u.parentNode.insertBefore(r,u.nextSibling)}r.innerHTML=t}d.done(f.stats.bad,f.stats.all)}function o(r){var s=f.filters.length,v=false;if(!s){return true}while(s--){var t=f.filters[s],u=t.charAt(0)=="!";if(u){t=t.slice(1)}if(r.indexOf(t)!==-1){return !u}if(u){v=true}}return v}function j(r){r=r===null?"":r+"";return r.replace(/[\&"<>\\]/g,function(t){switch(t){case"&":return"&amp;";case"\\":return"\\\\";case'"':return'"';case"<":return"&lt;";case">":return"&gt;";default:return t}})}function n(r,v,u,t){t=j(t)||(r?"okay":"failed");t='<span class="test-message">'+t+"</span>";u='<span class="test-expected">'+j(d.jsDump.parse(u))+"</span>";v='<span class="test-actual">'+j(d.jsDump.parse(v))+"</span>";var s=t+", expected: "+u+" result: "+v;d.log(r,s);f.assertions.push({result:!!r,message:s})}function l(r){f.queue.push(r);if(f.autorun&&!f.blocking){c()}}function c(){var r=(new Date()).getTime();while(f.queue.length&&!f.blocking){if(f.updateRate<=0||(((new Date()).getTime()-r)<f.updateRate)){f.queue.shift()()}else{setTimeout(c,13);break}}}function b(){f.pollution=[];if(f.noglobals){for(var r in k){f.pollution.push(r)}}}function e(t){var s=f.pollution;b();var r=p(s,f.pollution);if(r.length>0){ok(false,"Introduced global variable(s): "+r.join(", "));f.expected++}var u=p(f.pollution,s);if(u.length>0){ok(false,"Deleted global variable(s): "+u.join(", "));f.expected++}}function p(t,s){var r=t.slice();for(var v=0;v<r.length;v++){for(var u=0;u<s.length;u++){if(r[v]===s[u]){r.splice(v,1);v--;break}}}return r}function g(s,r,t){if(typeof console!=="undefined"&&console.error&&console.warn){console.error(s);console.error(r);console.warn(t.toString())}else{if(k.opera&&opera.postError){opera.postError(s,r,t.toString)}}}function m(s,r){for(var t in r){s[t]=r[t]}return s}function h(t,s,r){if(t.addEventListener){t.addEventListener(s,r,false)}else{if(t.attachEvent){t.attachEvent("on"+s,r)}else{r()}}}function a(r){return !!(typeof document!=="undefined"&&document&&document.getElementById)&&document.getElementById(r)}d.equiv=function(){var v;var w=[];var s=[];function r(x){if(d.is("String",x)){return"string"}else{if(d.is("Boolean",x)){return"boolean"}else{if(d.is("Number",x)){if(isNaN(x)){return"nan"}else{return"number"}}else{if(typeof x==="undefined"){return"undefined"}else{if(x===null){return"null"}else{if(d.is("Array",x)){return"array"}else{if(d.is("Date",x)){return"date"}else{if(d.is("RegExp",x)){return"regexp"}else{if(typeof x==="object"){return"object"}else{if(d.is("Function",x)){return"function"}else{return undefined}}}}}}}}}}}function u(z,y,x){var A=r(z);if(A){if(r(y[A])==="function"){return y[A].apply(y,x)}else{return y[A]}}}var t=function(){function x(y,z){if(y instanceof z.constructor||z instanceof y.constructor){return z==y}else{return z===y}}return{string:x,"boolean":x,number:x,"null":x,"undefined":x,nan:function(y){return isNaN(y)},date:function(y,z){return r(y)==="date"&&z.valueOf()===y.valueOf()},regexp:function(y,z){return r(y)==="regexp"&&z.source===y.source&&z.global===y.global&&z.ignoreCase===y.ignoreCase&&z.multiline===y.multiline},"function":function(){var y=w[w.length-1];return y!==Object&&typeof y!=="undefined"},array:function(z,B){var D,C,A;var y;if(!(r(z)==="array")){return false}y=B.length;if(y!==z.length){return false}s.push(B);for(D=0;D<y;D++){A=false;for(C=0;C<s.length;C++){if(s[C]===B[D]){A=true}}if(!A&&!v(B[D],z[D])){s.pop();return false}}s.pop();return true},object:function(z,B){var E,C,A;var y=true;var D=[],F=[];if(B.constructor!==z.constructor){return false}w.push(B.constructor);s.push(B);for(E in B){A=false;for(C=0;C<s.length;C++){if(s[C]===B[E]){A=true}}D.push(E);if(!A&&!v(B[E],z[E])){y=false;break}}w.pop();s.pop();for(E in z){F.push(E)}return y&&v(D.sort(),F.sort())}}}();v=function(){var x=Array.prototype.slice.apply(arguments);if(x.length<2){return true}return(function(z,y){if(z===y){return true}else{if(z===null||y===null||typeof z==="undefined"||typeof y==="undefined"||r(z)!==r(y)){return false}else{return u(z,t,[y,z])}}})(x[0],x[1])&&arguments.callee.apply(this,x.splice(1,x.length-1))};return v}();d.jsDump=(function(){function r(x){return'"'+x.toString().replace(/"/g,'\\"')+'"'}function s(x){return x+""}function u(C,x,z){var A=t.separator(),B=t.indent(),y=t.indent(1);if(x.join){x=x.join(","+A+y)}if(!x){return C+z}return[C,y+x,B+z].join(A)}function w(x){var z=x.length,y=Array(z);this.up();while(z--){y[z]=this.parse(x[z])}this.down();return u("[",y,"]")}var v=/^function (\w+)/;var t={parse:function(y,x){var z=this.parsers[x||this.typeOf(y)];x=typeof z;return x=="function"?z.call(this,y):x=="string"?z:this.parsers.error},typeOf:function(y){var x;if(y===null){x="null"}else{if(typeof y==="undefined"){x="undefined"}else{if(d.is("RegExp",y)){x="regexp"}else{if(d.is("Date",y)){x="date"}else{if(d.is("Function",y)){x="function"}else{if(y.setInterval&&y.document&&!y.nodeType){x="window"}else{if(y.nodeType===9){x="document"}else{if(y.nodeType){x="node"}else{if(typeof y==="object"&&typeof y.length==="number"&&y.length>=0){x="array"}else{x=typeof y}}}}}}}}}return x},separator:function(){return this.multiline?this.HTML?"<br />":"\n":this.HTML?"&nbsp;":" "},indent:function(x){if(!this.multiline){return""}var y=this.indentChar;if(this.HTML){y=y.replace(/\t/g,"   ").replace(/ /g,"&nbsp;")}return Array(this._depth_+(x||0)).join(y)},up:function(x){this._depth_+=x||1},down:function(x){this._depth_-=x||1},setParser:function(x,y){this.parsers[x]=y},quote:r,literal:s,join:u,_depth_:1,parsers:{window:"[Window]",document:"[Document]",error:"[ERROR]",unknown:"[Unknown]","null":"null",undefined:"undefined","function":function(z){var y="function",x="name" in z?z.name:(v.exec(z)||[])[1];if(x){y+=" "+x}y+="(";y=[y,this.parse(z,"functionArgs"),"){"].join("");return u(y,this.parse(z,"functionCode"),"}")},array:w,nodelist:w,arguments:w,object:function(z){var x=[];this.up();for(var y in z){x.push(this.parse(y,"key")+": "+this.parse(z[y]))}this.down();return u("{",x,"}")},node:function(B){var A=this.HTML?"&lt;":"<",D=this.HTML?"&gt;":">";var x=B.nodeName.toLowerCase(),z=A+x;for(var y in this.DOMAttrs){var C=B[this.DOMAttrs[y]];if(C){z+=" "+y+"="+this.parse(C,"attribute")}}return z+D+A+"/"+x+D},functionArgs:function(z){var x=z.length;if(!x){return""}var y=Array(x);while(x--){y[x]=String.fromCharCode(97+x)}return" "+y.join(", ")+" "},key:r,functionCode:"[code]",attribute:r,string:r,date:r,regexp:s,number:s,"boolean":s},DOMAttrs:{id:"id",name:"name","class":"className"},HTML:false,indentChar:"   ",multiline:false};return t})();function q(r){var s="",u;for(var t=0;r[t];t++){u=r[t];if(u.nodeType===3||u.nodeType===4){s+=u.nodeValue}else{if(u.nodeType!==8){s+=q(u.childNodes)}}}return s}})(this);
