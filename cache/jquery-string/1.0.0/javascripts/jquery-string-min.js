jQuery.extend({__stringPrototype:{JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,ScriptFragment:"<script[^>]*>([\\S\\s]*?)<\/script>",specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"},blank:function(a){return/^\s*$/.test(this.s(a)||" ")},camelize:function(d){var b=this.s(d).split("-"),c;d=[b[0]];for(c=1;c<b.length;c++){d.push(b[c].charAt(0).toUpperCase()+b[c].substring(1))}d=d.join("");return this.r(arguments,0,d)},capitalize:function(a){a=this.s(a);a=a.charAt(0).toUpperCase()+a.substring(1).toLowerCase();return this.r(arguments,0,a)},dasherize:function(a){a=this.s(a).split("_").join("-");return this.r(arguments,0,a)},empty:function(a){return this.s(a)===""},endsWith:function(b,a){a=this.s(a);var c=a.length-b.length;return c>=0&&a.lastIndexOf(b)===c},escapeHTML:function(a){a=this.s(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return this.r(arguments,0,a)},evalJSON:function(sanitize,s){s=this.s(s);var json=this.unfilterJSON(false,s);try{if(!sanitize||this.isJSON(json)){return eval("("+json+")")}}catch(e){}throw new SyntaxError("Badly formed JSON string: "+s)},evalScripts:function(s){var scriptTags=this.extractScripts(this.s(s)),results=[];if(scriptTags.length>0){for(var i=0;i<scriptTags.length;i++){results.push(eval(scriptTags[i]))}}return results},extractScripts:function(c){var e=new RegExp(this.ScriptFragment,"img"),d=new RegExp(this.ScriptFragment,"im"),a=this.s(c).match(e)||[],f=[];if(a.length>0){for(var b=0;b<a.length;b++){f.push(a[b].match(d)[1]||"")}}return f},gsub:function(c,b,a){a=this.s(a);if(jQuery.isFunction(b)){a=this.sub(c,b,-1,a)}else{a=a.split(c).join(b)}return this.r(arguments,2,a)},include:function(b,a){return this.s(a).indexOf(b)>-1},inspect:function(b,c){c=this.s(c);var a;try{a=this.sub(/[\x00-\x1f\\]/,function(e){var f=jQuery.__stringPrototype.specialChar[e[0]];return f?f:"\\u00"+e[0].charCodeAt().toPaddedString(2,16)},-1,c)}catch(d){a=c}c=(b)?'"'+a.replace(/"/g,'\\"')+'"':"'"+a.replace(/'/g,"\\'")+"'";return this.r(arguments,1,c)},interpolate:function(f,e,c){c=this.s(c);if(!e){e=/(\#\{\s*(\w+)\s*\})/}var a=new RegExp(e.source,"g");var d=c.match(a),b;for(b=0;b<d.length;b++){c=c.replace(d[b],f[d[b].match(e)[2]])}return this.r(arguments,2,c)},isJSON:function(a){a=this.s(a);if(this.blank(a)){return false}a=a.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,"");return(/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/).test(a)},scan:function(c,b,a){a=this.s(a);this.sub(c,b,-1,a);return this.r(arguments,2,a)},startsWith:function(b,a){return this.s(a).indexOf(b)===0},strip:function(a){a=jQuery.trim(this.s(a));return this.r(arguments,0,a)},stripScripts:function(a){a=this.s(a).replace(new RegExp(this.ScriptFragment,"img"),"");return this.r(arguments,0,a)},stripTags:function(a){a=this.s(a).replace(/<\/?[^>]+>/gi,"");return this.r(arguments,0,a)},sub:function(h,d,e,c){c=this.s(c);if(h.source&&!h.global){var a=(h.ignoreCase)?"ig":"g";a+=(h.multiline)?"m":"";h=new RegExp(h.source,a)}var g=c.split(h),f=c.match(h);if(jQuery.browser.msie){if(c.indexOf(f[0])==0){g.unshift("")}if(c.lastIndexOf(f[f.length-1])==c.length-f[f.length-1].length){g.push("")}}e=(e<0)?(g.length-1):e||1;c=g[0];for(var b=1;b<g.length;b++){if(b<=e){if(jQuery.isFunction(d)){c+=d(f[b-1]||f)+g[b]}else{c+=d+g[b]}}else{c+=(f[b-1]||f)+g[b]}}return this.r(arguments,3,c)},succ:function(a){a=this.s(a);a=a.slice(0,a.length-1)+String.fromCharCode(a.charCodeAt(a.length-1)+1);return this.r(arguments,0,a)},times:function(d,c){c=this.s(c);var a="";for(var b=0;b<d;b++){a+=c}return this.r(arguments,1,a)},toJSON:function(a){return this.r(arguments,0,this.inspect(true,this.s(a)))},toQueryParams:function(f,c){c=this.s(c);var e=c.substring(c.indexOf("?")+1).split("#")[0].split(f||"&"),h={},b,a,d,g;for(b=0;b<e.length;b++){g=e[b].split("=");a=decodeURIComponent(g[0]);d=(g[1])?decodeURIComponent(g[1]):undefined;if(h[a]){if(typeof h[a]=="string"){h[a]=[h[a]]}h[a].push(d)}else{h[a]=d}}return h},truncate:function(c,a,b){b=this.s(b);c=c||30;a=(!a)?"...":a;b=(b.length>c)?b.slice(0,c-a.length)+a:String(b);return this.r(arguments,2,b)},underscore:function(a){a=this.sub(/[A-Z]/,function(b){return"_"+b.toLowerCase()},-1,this.s(a));if(a.charAt(0)=="_"){a=a.substring(1)}return this.r(arguments,0,a)},unescapeHTML:function(a){a=this.stripTags(this.s(a)).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");return this.r(arguments,0,a)},unfilterJSON:function(c,b){b=this.s(b);c=c||this.JSONFilter;var a=b.match(c);b=(a!==null)?a[1]:b;return this.r(arguments,1,jQuery.trim(b))},r:function(a,b,c){if(a.length>b||this.str===undefined){return c}else{this.str=""+c;return this}},s:function(a){if(a===""||a){return a}if(this.str===""||this.str){return this.str}return this}},string:function(a){if(a===String.prototype){jQuery.extend(String.prototype,jQuery.__stringPrototype)}else{return jQuery.extend({str:a},jQuery.__stringPrototype)}}});jQuery.__stringPrototype.parseQuery=jQuery.__stringPrototype.toQueryParams;
